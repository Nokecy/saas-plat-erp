# 成本核算

库存管理不仅对存货的数量进行管理，而且也要对存货的成本进行管理，企业进行成本核算时，存货成本就是一个最主要也是最基本的成本项目。因此存货在出入库时，都需要确定成本，单据中的单价实际上就是存货的成本。  
成本可以分为入库成本和出库成本2种。通常认为入库成本是可知的，或是应该由人为确认的，而出库成本是根据存货的计价方式来确定的。  
维护日常单据时，在满足相应条件时系统会自动带出存货的默认单价。  

+ 入库成本  
在做入库业务时，系统在默认情况下首先会自动根据入库成本选项确定一个成本，用户可根据存货的实际成本再修改入库单价。  

+ 出库成本
出库单价是根据存货的计价方式来计算出的一个成本，但考虑到效率问题，系统由存货等信息自动带出这个存货的结存成本值做为出库单价，而不是根据计价方式计算的成本，在单据生效时，才会根据计价方式计算出准确的成本并更新先前的默认结存成本。如果存货的出库成本是由用户确认的，而不根据计价方式计算得出，可以勾选上“手工确定成本”列，对于有“手工确定成本”标识的明细行，系统不再重新计算出库成本，而保留其原始成本。  

## 计价模式

计价模式是指计算存货发出成本的模式，包括“按仓库+存货”计价和“按存货”计价。  
两种计价模式的区别在于如何处理“同一个存货在多个仓库发生收发业务”的计价：  
当选择“按仓库+存货”计价模式时，同一个存货在不同仓库发生的出入库业务数据，按仓库分开计价；  
当选择“按存货”计价模式时，不考虑仓库因素，即把同一个存货在不同仓库发生的出入库业务数据放在一起计价。  

举例说明  

对于同一个存货A，在不同仓库发生的业务数据如下：
| 仓库   | 单据编号	   | 日期	      | 	 |  入库    |   |     	| 出库    |    |      | 结存   |     |
|        |            |            |数量 |	单价 | 金额 | 数量 |	单价 |	金额 |	数量 |	单价 |	金额 |
|--------|------------|------------|-----|------|-----|------|-------|-----|--------|-------|-------|
1号仓库	 	             月初结存	 	 	 	 	 	 	     30	3	90
         RK001	        2009-4-1	   20	3.5	70	 	 	 	 	 	 
         CK004	        2009-4-4	 	 	 	        15	?	?	 	 	 
2号仓库	 	            月初结存	 	 	 	 	 	 	     40	3	120
         RK002	       2009-4-2	     40	3.2	128	 	 	 	 	 	 
         CK005	       2009-4-5	 	 	 	           10	?	?	 

假设存货A的计价方式是全月平均法，对存货A发出成本计算的处理分别如下：
当选择“按仓库+存货”计价模式时
存货A的在不同仓库的出入库业务数据要分开计价：
1号仓库：出库单价是（90+70）/ (30+20)=3.2；
2号仓库：出库单价是（120+128）/ (40+40)=3.1。
系统回写存货A在CK004、CK005号出库单据的单价分别是3.2、3.1，出库金额由系统根据“数量*单价”计算得出。
当选择“按存货”计价模式时
存货A在不同仓库的出入库业务数据要放在一起计价，出库单价是（90+70+120+128）/(30+20+40+40) =3.1384。
系统会写存货A在CK004、CK005号出库单据的单价都是3.1384，出库金额由系统根据“数量*单价”计算得出。

## 计价方式

计价方式是指存货发出成本的计算方法，亦称存货计价法，本系统提供先进先出法、个别计价法、移动平均法、全月平均法四种计价方式。  
注意：当计价模式为“按仓库+存货”计价，且有调拨业务时，不建议使用全月平均的计价法。  

### 先进先出法

先进先出法是指根据“先入库先发出”的假定原则，以先入库存货的单价计算发出存货成本的方法。  
具体做法：在进行出库成本计价时，系统是先按存货的期初余额的单价计算发出存货的成本，发完期初结存数后，再按第一批入库的存货的单价计算，发完第一批之后，再发第二批的存货，依此从前向后类推，计算发出存货和结存存货的成本。  
适用存货范围：对于存货价格波动较大，或者容易变质的存货可以考虑采用先进先出法进行计价。  
优点：可以随时结转存货发出成本，期末存货的成本接近当前的成本水平。  
缺点：在物价波动的情况下，发出的存货成本偏离了当前的成本水平，当物价上涨时，可能会高估企业当期利润和库存存货价值，反之，可能会低估企业存货价值和当期利润。  

举例说明  
对于A存货，2009年4月份发生的业务明细如下：  
|日期	      |备注	    |数量	|单价	|金额|
|-----------|--------|-----|-----|----|
|期初结存	   | 5	    | 2.2 |	11  |    |
|2009-4-1	  |采购入库	 |20	|2	  |40  |
|2009-4-2	   |采购入库	|35	|3	  |105 |
|2009-4-3	   |领用出库	|11	|?	  |?   |
|2009-4-4	   |领用出库	|30	|?	  |?   |

对于4月3日领用出库的11个A存货，先把月初结存的5个发出，然后再从4月1日入库的20个A存货里发出6个，所以出库金额是5×2.2+6×2=23，平均单价是2.091。  
对于4月4日领用出库的30个A存货，先把4月1日入库剩余的14个存货发出，然后再从4月2日入库的A存货里发出16个，所以出库金额是14×2+16×3=76，平均单价是76/30=2.533。  

相关规则   
红字出库单若无来源单或从来源单取不到成本，则根据库存选项【退货/退库成本】的设置方式处理。  
先进先出存货的红字入库单若无来源单或从来源单取不到成本，除采购入库单之外的单据类型，按蓝字出库单处理。  
红字采购入库单的单价是由进货单最终确认  
如果出现账中为零成本或负成本，按选项【零成本出库】设置的方式处理。  
费用分摊、采购核算或手工关联调整引起入库单入库成本变化后，要调整对应出库单的单价和金额，如果入库单和出库单在同一个月份且出库单尚未生成凭证，则直接修改出库单单价和金额；如果入库单和出库单不在同一个月份或出库单已生成凭证，则生成出库调整单。但选择了“手工确定成本”标记的出库单记录不进行调整。  
对于先进先出的存货，如果同一笔出库记录包含了两个或两个以上不同的单价，在单据上显示平均单价，在存货明细账以不同的单价分行显示。  


### 个别计价法

个别计价法又称分批认定法、具体辨认法或分批实际法，指对每次或每批发出的存货进行个别辨认，明确属于哪一批或哪几批收入的存货，然后分别按照所属批次的实际入库成本确定发出存货的实际成本。  
具体做法：在填制出库单时，由用户对个别计价存货的每条出库记录行指定对应的入库单号，系统根据对应入库单号上该存货的入库单价确认本次发出存货的成本。  
适用存货范围：对于容易识别收发对应关系、存货品种数量不多、单位成本较高的存货，或者对于不可替代使用的存货、为特定项目专门购入或生产的存货，通常采用个别计价法确定发出存货的成本。  
优点：实物流转和成本流转保持一致，计算发出存货和期末存货的成本比较合理、准确。  
缺点：实务中必须对存货的收、发、存逐批认定，填制出库单时对个别计价存货的每条出库记录都要指定所对应的入库单号，工作量繁重，困难较大。  

举例说明  
对于A存货，4月份发生的业务明细如下：  
|日期	      |单据编号	|备注   	|   | 入库 |    |        |	出库 ||     |
|           |        |         | 数量|单价|金额|入库单号|数量|单价|金额|
|-----------|--------|---------|----|----|----|-------|-----|---|----|
|2009-4-1	  |rk001	 |采购入库	|20	|2	|40	 	 |	 	     |     |   |    |           
|2009-4-2	  |rk002	 |采购入库	|35	|3	|105	 |	 	     |     |   |    |
|2009-4-3	  |rk003	 |采购入库	|40	|4	|160	 |	 	     |     |   |    |
|2009-4-4	  |ck001	 |生产领用	 |	| 	| 	   |rk002	   |11	 |3	 |33  |
|2009-4-5	  |ck002	 |生产领用	 |	| 	|      |rk003	   |30   |4	 |120  |

对于4月4日出库的11个存货，由于用户指定了对应的入库单号是rk002，所以单价是rk002单上的单价3，出库金额为11×3=33。  
对于4月5日出库的30个存货，由于用户指定了对应的入库单号是rk003，所以单价是rk003单上的单价4，出库金额为30×4=120。  

相关规则  
红字出库单若无来源单或从来源单取不到成本，则根据库存选项【退货/退库成本】的设置方式处理。  
个别计价存货的红字入库单，需要指定对应的蓝字入库的入库单号。  
红字采购入库单的单价是由进货单最终确认。  
如果出现账中为零成本或负成本，按选项【零成本出库】设置的方式处理。  
费用分摊、采购核算或手工关联调整引起入库单入库成本变化后，要调整对应出库单的单价和金额，如果入库单和出库单在同一个月份且出库单尚未生成凭证，则直接修改出库单单价和金额，如果入库单和出库单不在同一个月份或出库单已生成凭证，则生成出库调整单。但选择了“手工确定成本”标记的出库单记录不进行调整。  


### 移动平均法

移动平均法，亦称移动加权平均法，是指每次收货时，立即根据库存存货总数量和总成本，计算出新的平均单位成本，每次发出存货时，都是根据当前时点的最新平均单位成本确定本次发出成本。  
使用移动平均法计价的存货的出库成本在同一个月之内是动态变化的。  
优点：移动平均法能够实时反映发出存货和库存存货的成本，每天发生的出入库单据都可以立即以实时成本生成会计凭证传到财务系统，保证业务和财务数据的同步性。  
缺点：如果前面的单据进行了成本调整，并且后面的出库单据已经生成凭证，系统不能直接更新后面单据的出库成本，而是通过调整单的方式进行出库成本调整，导致调整单与凭证量比较多。  

举例说明  
对于A存货，4月份发生的业务明细如下:  
|2008年||备注|    |入库|   |   	|出库	|  |  |结存|     |
|月|日|      |数量|单价|金额|数量|单价|金额|数量|单价|金额|
| |	|月初结存|	 	| 	 |	 |	 	|	  |    |10	|2	|20  |
|4|1|采购入库|10	|3	|30	 |	 	|   |    |20	|2.5|50  |
|4|2|领用出库|	  |	 	| 	 |15  |2.5|37.5|5	  |2.5|12.5|
|4|3|采购入库|5	  |3.5|17.5|	  |	 	|    |10  |3	|30  |
|4|4|领用出库| 	  |	  |    |4   |3  |12  |6	  |3  |18  |

4月1日入库10个之后，系统立即计算最新平均单位成本，（20+30）/（10+10）=2.5  
4月2日出库时，当前的最新平均单位成本是2.5，所以出库金额是15×2.5=37.5  
4月3日入库5个之后，系统立即计算最新平均单位成本，（12.5+17.5）/（5+5）=3  
4月4日以最新平均单位成本出库，出库金额是4×3=12  

相关规则  
移动平均法的红字出库单按蓝字出库单的规则进行计价。  
移动平均法的红字入库单，如果无来源单或者从来源单获取不到成本时，按“入库成本”选项获取。  
红字采购入库单的单价是由进货单最终确认  
进行出库成本计价时，如果出现账中为零成本或负成本，系统自动按用户设置的【零成本出库】方式计算出库成本。  


### 全月平均法

全月平均法也叫全月一次加权平均法，是指以“本月全部收货成本与月初存货成本之和”，除以“本月全部收入存货数量与月初存货数量之和”，计算出存货的加权平均单位成本，并据以确定当月发出存货的成本和库存成本的方法。  
全月平均法存货的同一个月度内的出库成本相同（手工确定的出库成本除外）。  
使用全月平均法时，建议用户到月底再生成凭证，避免人为增加调整工作量。  

举例说明  
对于A存货，4月份发生的业务明细如下:  
2008年	备注	入库	出库
月	日	数量	单价	金额	数量	单价	金额
 	 	月初结存	5	2	10	 	 	 
4	1	采购入库	10	3	30	 	 	 
4	2	领用出库	 	 	 	15	?	?
4	3	采购入库	15	4	60	 	 	 
4	4	领用出库	 	 	 	4	?	?
4	5	采购入库	20	2	40	 	 	 

本月的平均单位成本是（10+30+60+40）/（5+10+15+20）=2.8  
4月2日出库金额是15×2.8=42  
4月4日出库金额是4×2.8=11.2  

相关规则  
全月平均法存货的红字出库单按蓝字出库单的规则进行计价。  
全月平均法存货的红字入库单，如果无来源单或者从来源单获取不到成本时，按“入库成本”选项获取。  
红字采购入库单的单价是由进货单最终确认  
进行出库成本计价时，如果出现账中为零成本或负成本，系统自动按用户设置的【零成本出库】方式计算出库成本。  


# 暂估处理方式

在企业日常业务里，暂估是指外购入库的货物，当月发票未到，在无法确定实际采购成本的情况下，暂时估计一个价格入账；  
进货单立账时，进货单是采购入库成本的立账单据，采购入库单在没有对应的进货单进行采购核算的情况下，采购入库单上的成本是暂估成本。  
发票立账时，采购发票是采购入库成本的立账单据，采购入库单在没有对应的采购发票进行采购核算的情况下，采购入库单上的成本是暂估成本。  
暂估处理方式是企业处理实际成本（即核算成本）和暂估成本差异的方式，包括“单到回冲”、“单到补差”；  
单到回冲是跨月进行采购核算时，由系统按本次核算数量和暂估单价生成一张红字回冲单，然后按照核算单价和核算数量生成一张蓝字回冲单；  
单到补差是指进行采购核算时，由系统根据核算金额和暂估金额的差异生成一张入库调整单。  

举例说明  

4月1日，采购入库一批A存货，数量是30，发票未到，估计价格为2，金额是60；  
11月3日，企业收到发票，填写进货单，数量是30，不含税单价是2.1，金额是63。  
当暂估处理方式是“单到回冲”时，系统在跨月采购核算后生成一张红字回冲单，数量是-30，单价是2，金额是-60；同时生成一张蓝字回冲单，数量是30，单价是2.1，金额是63。  
当暂估方式是“单到补差”时，系统在采购核算之后生成一张入库调整单，金额是3，等于核算金额和暂估金额的差额。  


# 损耗

对于某些易挥发或易破碎的存货，在物资采购运输过程时往往存在合理损耗，由于损耗的数量仍然需要支付货款，因而在计算入库成本单价时，需要把所支付的全部不含税货款金额分摊给实际入库的存货数量。  
例如石油贸易公司从供应商处采购一批石油，买卖双方约定0.3%以内为合理损耗标准，供应商出库时过磅数量为100吨，而企业收货时实际只收到99.8吨，在合理损耗范围之内，则企业仍然还要按照100吨支付货款。  
企业应用本系统处理有损耗发生的采购业务时，需要注意两点，一是损耗数量的记录，二是入库成本的核算。  
进货单立账时，损耗数量是由后续的单据决定的，先入库后进货时由进货单确认损耗数量，先进货后入库时由入库单确认损耗数量；发票立账时，损耗数量是由发票最后确认的。采购入库单、进货单、发票都可以输入损耗数量，上个环节填写的损耗数量会自动流转到下个环节的单据，后续环节可以修改。先入库后进货，如果“进货数量-进货单的损耗数量=入库单数量”，表示采购入库单到进货单流转完毕；先进货后入库，如果“入库单数量+入库单的损耗数量=进货数量”，表示进货单到采购入库单流转完毕。  
采购业务有合理损耗发生时的入库成本单价，等于进货单的金额/入库单的实收数量，或等于发票的金额/入库单的实收数量。  

举例说明  

进货单立账时，先进货后入库流程；  
企业向供应商采购100吨存货，供应商按照100吨发货，企业先填写进货单，100吨、单价10、含税单价1.17、金额1000、含税金额1170；  
企业实际验收入库99.8吨，双方确认合理损耗是0.2，则在根据进货单生成采购入库单时，企业需要在采购入库单输入损耗数量0.2；  
上述业务，企业仍然需要按照100吨向供应商支付货款；  
采购核算时，入库单的不含税单价=1000/99.8。  
