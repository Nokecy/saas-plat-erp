{
  "name": "list",
  "text": "部门列表",
  "url": "appfx/list",
  "config": {
    "data": {
      "model": "DepartmentList",
      "parentKey": "pid"
    },
    "actions": {
      "toggleEnable": {
        "command": "toggle",
        "args": {
          "sendCommand": ["changeEnable", {
            "id": "$tree.selected.id",
            "enable": "!$tree.selected.enabled"
          }]
        }
      },
      "openEmployee": {
        "command": "open",
        "args": {
          "modulename": "erp.base.employee.detail",
          "defaults": {
            "department": "$tree.selected.name"
          }
        }
      },
      "deleteDepartment": {
        "command": "delete",
        "args": {
          "sendCommand": ["deleteDepartment", {
            "id": "$tree.selected.id"
          }]
        }
      },
      "filterEnable": {
        "command": "filter",
        "args": {
          "filter": "@item.enabled==true"
        }
      },
      "filterAll": {
        "command": "filter"
      }
    },
    "views": {
      "toolbar": {
        "showCount": 2,
        "items": [{
          "name": "search",
          "icon": "fa-search",
          "text": "查找",
          "action": "search"
        }, {
          "name": "addDepartment",
          "text": "添加部门",
          "action": "add",
          "icon": "fa-plus"
        }, {
          "name": "addEmployee",
          "text": "添加员工",
          "action": "openEmployee",
          "icon": "fa-user-plus"
        }, {
          "name": "edit",
          "text": "删除",
          "icon": "fa-bullseye",
          "action": "edit"
        }]
      },
      "filter": {
        "buttons": [{
          "name": "enabled",
          "text": "启用",
          "action": "filterEnable"
        }, {
          "name": "all",
          "text": "全部",
          "action": "filterAll"
        }]
      },
      "list": {
        "columns": [{
          "name": "text",
          "value": "$item.name",
          "text": "编码"
        }, {
          "name": "text",
          "value": "$item.text",
          "text": "名称",
          "flex": 1
        }, {
          "name": "enabled",
          "value": "$item.enabled?'启用':'停用'",
          "text": "状态"
        }],
        "actions": [{
          "filter": "$ctx.mode!='edit'",
          "name": "changeStatus",
          "text": "$item.enabled?'启用':'停用'",
          "action": "toggleEnable"
        }, {
          "filter": "$ctx.mode==edit",
          "name": "delete",
          "text": "删除",
          "action": "deleteDepartment"
        }]
      },
      "editMode": {

      }
    }
  }
}
